## ROADMAP: Sistema de Moderaci√≥n (Enfoque Progresivo)

### Filosof√≠a
Implementar moderaci√≥n de forma incremental, comenzando simple y escalando seg√∫n necesidad real. Evitar sobreingenier√≠a prematura.

---

## FASE 1: Moderaci√≥n Manual Simple (IMPLEMENTAR AHORA)

**Objetivo:** Control total del administrador con m√≠nima complejidad

### Backend - Soft Delete Fields

**Mini-objetivos:**

- [ ] Agregar campos de moderaci√≥n a entidades existentes:
  ```typescript
  // Para: cars, groups, posts (cuando existan)
  hidden: boolean;              // Oculto por moderaci√≥n
  hidden_reason?: string;       // Nota interna (ej: "spam", "inapropiado")
  hidden_at?: Date;
  hidden_by?: string;           // user_id del moderador
  ```

- [ ] Crear migraci√≥n para agregar estos campos
- [ ] Actualizar repositorios para filtrar `hidden: true` por defecto en queries p√∫blicas
- [ ] Crear endpoint admin: `PATCH /admin/cars/:id/hide` (protegido)
- [ ] Crear endpoint admin: `PATCH /admin/groups/:id/hide` (protegido)

**Archivos a modificar/crear:**
- `apps/api/src/database/migrations/XXXX_add_moderation_fields.ts`
- `apps/api/src/modules/cars/cars.repository.ts` (filtrar hidden)
- `apps/api/src/modules/groups/groups.repository.ts` (filtrar hidden)
- `apps/api/src/modules/admin/admin.controller.ts` (nuevo)
- `apps/api/src/modules/admin/admin.service.ts` (nuevo)

### Backend - Admin Guard

**Mini-objetivos:**

- [ ] Agregar campo `is_admin: boolean` a tabla `users` (default: false)
- [ ] Crear migraci√≥n
- [ ] Crear guard `AdminGuard` para proteger rutas `/admin/*`
- [ ] Asignarte manualmente `is_admin: true` en BD

**Archivos a crear:**
- `apps/api/src/shared/guards/admin.guard.ts`
- `apps/api/src/database/migrations/XXXX_add_is_admin_to_users.ts`

### Frontend - Admin Actions

**Mini-objetivos:**

- [ ] En dropdown de autos (solo visible si `user.isAdmin`):
  - Agregar opci√≥n "üö´ Ocultar auto"
- [ ] Crear `HideContentModal.tsx`:
  - Input de motivo (texto libre)
  - Bot√≥n confirmar/cancelar
- [ ] Hook `useHideContent()` para llamar endpoints admin

**Archivos a crear:**
- `apps/web/src/features/admin/components/HideContentModal.tsx`
- `apps/web/src/features/admin/hooks/useHideContent.ts`

### Frontend - User Feedback (Opcional pero recomendado)

**Mini-objetivos:**

- [ ] Bot√≥n "‚ö†Ô∏è Reportar problema" en footer o perfil
- [ ] Abre mailto o form simple que te env√≠a email
- [ ] No requiere base de datos ni l√≥gica compleja

**Beneficio:** Los usuarios tienen forma de contactarte sin que implementes sistema complejo

### Validaci√≥n Fase 1

**Criterios de completitud:**

- [ ] T√∫ como admin puedes ocultar autos/grupos desde la UI
- [ ] Contenido oculto no aparece en feeds p√∫blicos
- [ ] Usuarios tienen forma de reportarte problemas (email/contacto)
- [ ] Implementaci√≥n total: ~4-6 horas

---

## FASE 2: Moderadores Curados (IMPLEMENTAR CUANDO...)

**Se√±ales para implementar:**
- Pasas >2 horas/semana moderando
- Tienes 2-3 personas de confianza que pueden ayudar
- ~200-500 usuarios activos

**Qu√© agregar:**

- [ ] Tabla `moderators` (user_id, permissions, assigned_by)
- [ ] Roles: `admin`, `moderator`
- [ ] Panel simple para moderadores: `/mod/queue`
- [ ] Log de acciones de moderaci√≥n (qui√©n ocult√≥ qu√©)

**Estimaci√≥n:** 1-2 d√≠as de desarrollo

---

## FASE 3: Sistema de Reportes Comunitario (IMPLEMENTAR CUANDO...)

**Se√±ales para implementar:**
- Recibes 5+ quejas/reportes por semana
- Usuarios preguntan "¬øc√≥mo reporto esto?"
- Tienes 500+ usuarios activos
- Ya entiendes patrones de contenido problem√°tico (por experiencia en Fase 1-2)

**Qu√© agregar:**

- [ ] Tabla `reports` completa con thresholds
- [ ] Rate limiting (10 reportes/d√≠a por usuario)
- [ ] Auto-ocultamiento (5+ reportes)
- [ ] Panel de reportes comunitarios
- [ ] Email alerts autom√°ticos

**Estimaci√≥n:** 1-2 semanas de desarrollo

**Estructura t√©cnica (referencia futura):**
```typescript
interface Report {
  id: string;
  reporter_id: string;
  reported_user_id?: string;
  reported_post_id?: string;
  reported_car_id?: string;
  reported_group_id?: string;
  reason: 'spam' | 'scam' | 'inappropriate' | 'harassment' | 'other';
  description?: string;
  status: 'pending' | 'reviewed' | 'resolved' | 'dismissed';
  created_at: Date;
  reviewed_at?: Date;
  reviewed_by?: string;
}
```

---

## Decisi√≥n Estrat√©gica

**Implementar ahora:** Solo Fase 1 (moderaci√≥n manual simple)

**Razones:**
1. ‚úÖ Tienes control total inicial
2. ‚úÖ Implementaci√≥n r√°pida (~medio d√≠a)
3. ‚úÖ Sin complejidad innecesaria
4. ‚úÖ Aprendes qu√© necesitas antes de construir sistema robusto
5. ‚úÖ Evitas sobreingenier√≠a para problema que a√∫n no existe

**No implementar todav√≠a:** Fases 2-3 (esperar se√±ales reales de necesidad)